# Player Movement Test
# Tests player movement and positioning across backends
name: "Player Movement Test"
description: "Tests player movement and positioning across backends"

setup:
  - action: "SERVER_COMMAND"
    command: "say Starting player movement test"
    name: "Server announcement"

  - action: "SERVER_COMMAND"
    command: "gamemode creative TestPlayer"
    name: "Set player to creative mode"

steps:
  # Connect player (if needed)
  - action: "CONNECT_PLAYER"
    player: "TestPlayer"
    name: "Connect test player"

  # Move player to coordinates using tp command
  - action: "PLAYER_COMMAND"
    player: "TestPlayer"
    command: "tp @p 100 64 100"
    name: "Move player to (100,64,100)"

  # Wait for teleport
  - action: "WAIT"
    duration: 1000
    name: "Wait for teleport"

  # Get player position using data command
  - action: "PLAYER_COMMAND"
    id: "check_pos_1"
    player: "TestPlayer"
    command: "data get entity @s Pos"
    name: "Check player position"

  # Move player to another location
  - action: "PLAYER_COMMAND"
    player: "TestPlayer"
    command: "tp @p 200 70 200"
    name: "Move player to (200,70,200)"

  - action: "WAIT"
    duration: 1000
    name: "Wait for teleport"

  # Get new position
  - action: "PLAYER_COMMAND"
    id: "check_pos_2"
    player: "TestPlayer"
    command: "data get entity @s Pos"
    name: "Check player position"

  # Move to relative location
  - action: "PLAYER_COMMAND"
    player: "TestPlayer"
    command: "tp @p ~ ~ ~"
    name: "Move player relatively (no change)"

  # Test dimension change (if supported)
  - action: "SERVER_COMMAND"
    command: "execute in minecraft:the_nether run tp TestPlayer 0 64 0"
    name: "Move player to nether"

  # Wait for dimension change
  - action: "WAIT"
    duration: 1000
    name: "Wait for dimension change"

  # Verify dimension
  - action: "SERVER_COMMAND"
    command: "execute in minecraft:the_end run tp TestPlayer 0 64 0"
    name: "Move player to end dimension"

  # Wait for dimension change
  - action: "WAIT"
    duration: 1000
    name: "Wait for end dimension change"

  # Return to overworld
  - action: "SERVER_COMMAND"
    command: "execute in minecraft:overworld run tp TestPlayer 0 64 0"
    name: "Return player to overworld"

cleanup:
  # Disconnect player
  - action: "DISCONNECT_PLAYER"
    player: "TestPlayer"
    name: "Disconnect test player"

  - action: "SERVER_COMMAND"
    command: "say Player movement test completed"
    name: "Test completion announcement"
