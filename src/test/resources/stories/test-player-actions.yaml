# Test: Player Actions
# Category: Player Commands
# Purpose: Tests player actions like health, position, and status

name: "Player Actions Test"
description: |
  Tests player actions including getting health, position,
  and other player status information.

backend: mineflayer

setup:
  - action: "connect"
    player: "pilaf_actor"
    name: "Connect action test player"

  - action: "wait"
    duration: 5
    name: "Wait for connection"

  - action: "servercommand"
    command: "say [Pilaf] Starting player actions test..."
    name: "Announce test start"

  - action: "servercommand"
    command: "gamemode creative pilaf_actor"
    name: "Set player to creative mode"

steps:
  # Test 1: Get player health
  - action: "get_player_health"
    player: "pilaf_actor"
    name: "Get initial player health"
    storeAs: "health_initial"

  # Test 2: Get player position
  - action: "get_player_position"
    player: "pilaf_actor"
    name: "Get player position"
    storeAs: "position_initial"

  # Test 3: Teleport for position change
  - action: "servercommand"
    command: "tp pilaf_actor 50 65 50"
    name: "Teleport player"

  - action: "wait"
    duration: 3
    name: "Wait for teleport"

  # Test 4: Get new position
  - action: "get_player_position"
    player: "pilaf_actor"
    name: "Get new player position"
    storeAs: "position_final"

  # Test 5: Compare positions
  - action: "compare_states"
    state1: "position_initial"
    state2: "position_final"
    name: "Compare positions"
    storeAs: "position_comparison"

cleanup:
  - action: "servercommand"
    command: "say [Pilaf] Player actions test completed"
    name: "Announce completion"

  - action: "disconnect"
    player: "pilaf_actor"
    name: "Disconnect test player"
