# Test: Response Content Assertions
# Category: Assertions
# Purpose: Tests command response content verification

name: "Response Assertions Test"
description: |
  Tests response content assertions.
  Demonstrates verifying command responses contain expected content.

backend: mineflayer

setup:
  - action: "connect"
    player: "pilaf_response"
    name: "Connect response test player"

  - action: "wait"
    duration: 5
    name: "Wait for connection"

  - action: "servercommand"
    command: "say [Pilaf] Starting response assertions test..."
    name: "Announce test start"

steps:
  # Test 1: Execute version command
  - action: "servercommand"
    command: "version"
    name: "Get server version"

  # Test 2: Execute list command
  - action: "servercommand"
    command: "list"
    name: "List online players"

  # Test 3: Store player position
  - action: "get_player_position"
    player: "pilaf_response"
    name: "Get player position"
    storeAs: "player_pos"

  - action: "print_stored_state"
    variableName: "player_pos"
    name: "Print player position"

  # Test 4: Compare states
  - action: "servercommand"
    command: "tp pilaf_response 400 64 400"
    name: "Teleport player"

  - action: "wait"
    duration: 3
    name: "Wait for teleport"

  - action: "get_player_position"
    player: "pilaf_response"
    name: "Get new position"
    storeAs: "new_player_pos"

  - action: "compare_states"
    state1: "player_pos"
    state2: "new_player_pos"
    name: "Compare positions"
    storeAs: "pos_comparison"

  - action: "print_state_comparison"
    variableName: "pos_comparison"
    name: "Print position comparison"

cleanup:
  - action: "servercommand"
    command: "tp pilaf_response 0 64 0"
    name: "Return player to spawn"

  - action: "servercommand"
    command: "say [Pilaf] Response assertions test completed"
    name: "Announce completion"

  - action: "disconnect"
    player: "pilaf_response"
    name: "Disconnect test player"
