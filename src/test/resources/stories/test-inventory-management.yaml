# Test: Inventory Management
# Category: Player Commands
# Purpose: Tests item giving, removal, and inventory checking

name: "Inventory Management Test"
description: |
  Tests inventory management commands including giving items,
  removing items, and checking inventory contents.

backend: mineflayer

setup:
  - action: "connect"
    player: "pilaf_inventory"
    name: "Connect inventory test player"

  - action: "wait"
    duration: 5
    name: "Wait for connection"

  - action: "servercommand"
    command: "say [Pilaf] Starting inventory management test..."
    name: "Announce test start"

  - action: "servercommand"
    command: "gamemode creative pilaf_inventory"
    name: "Set player to creative mode"

  - action: "servercommand"
    command: "clear pilaf_inventory"
    name: "Clear inventory for clean test"

steps:
  # Test 1: Give diamond sword
  - action: "giveitem"
    player: "pilaf_inventory"
    item: "diamond_sword"
    count: 1
    name: "Give diamond sword"

  - action: "getinventory"
    player: "pilaf_inventory"
    name: "Check inventory after diamond sword"
    storeAs: "inventory_diamond_sword"

  # Test 2: Give cobblestone stack
  - action: "giveitem"
    player: "pilaf_inventory"
    item: "cobblestone"
    count: 64
    name: "Give cobblestone stack"

  - action: "getinventory"
    player: "pilaf_inventory"
    name: "Check inventory after cobblestone"
    storeAs: "inventory_cobblestone"

  # Test 3: Store full inventory state
  - action: "getinventory"
    player: "pilaf_inventory"
    name: "Get full inventory state"
    storeAs: "inventory_full"

  # Test 4: Remove diamond sword
  - action: "removeitem"
    player: "pilaf_inventory"
    item: "diamond_sword"
    count: 1
    name: "Remove diamond sword"

  - action: "getinventory"
    player: "pilaf_inventory"
    name: "Check inventory after sword removal"
    storeAs: "inventory_after_sword_removal"

  # Test 5: Compare inventory states
  - action: "compare_states"
    state1: "inventory_full"
    state2: "inventory_after_sword_removal"
    name: "Compare inventory before and after removal"
    storeAs: "inventory_comparison"

cleanup:
  - action: "servercommand"
    command: "clear pilaf_inventory"
    name: "Clear inventory"

  - action: "servercommand"
    command: "say [Pilaf] Inventory management test completed"
    name: "Announce completion"

  - action: "disconnect"
    player: "pilaf_inventory"
    name: "Disconnect test player"
