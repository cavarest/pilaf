# Test: Basic RCON Command Execution
# Category: Server Commands
# Purpose: Validates basic RCON command execution and server command responses

name: "Basic RCON Command Test"
description: |
  Tests basic RCON command execution functionality.
  Verifies that server commands can be executed successfully
  and responses are captured properly.

backend: mineflayer

setup:
  - action: "connect"
    player: "pilaf_tester"
    name: "Connect test player"

  - action: "wait"
    duration: 5
    name: "Wait for connection"

  - action: "servercommand"
    command: "say [Pilaf] Starting RCON basic command test..."
    name: "Announce test start"

steps:
  # Test 1: Simple server command
  - action: "servercommand"
    command: "time set noon"
    name: "Set time to noon"

  - action: "wait"
    duration: 2
    name: "Wait for time change"

  # Test 2: Get world time
  - action: "get_world_time"
    name: "Get current world time"
    storeAs: "current_time"

  # Test 3: Server broadcast
  - action: "servercommand"
    command: "say Test broadcast message"
    name: "Send server broadcast"

  # Test 4: List online players
  - action: "servercommand"
    command: "list"
    name: "List online players"

  # Test 5: Get server version
  - action: "servercommand"
    command: "version"
    name: "Get server version"

  # Test 6: Help command
  - action: "servercommand"
    command: "help"
    name: "Get server help"

cleanup:
  - action: "servercommand"
    command: "say [Pilaf] RCON basic test completed"
    name: "Announce completion"

  - action: "disconnect"
    player: "pilaf_tester"
    name: "Disconnect test player"
