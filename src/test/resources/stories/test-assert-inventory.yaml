# Test: Inventory Assertions
# Category: Assertions
# Purpose: Tests inventory verification and assertions

name: "Inventory Assertions Test"
description: |
  Tests inventory assertions and verification.
  Demonstrates checking inventory contents and item counts.

backend: mineflayer

setup:
  - action: "connect"
    player: "pilaf_inventory_assert"
    name: "Connect inventory assertion test player"

  - action: "wait"
    duration: 5
    name: "Wait for connection"

  - action: "servercommand"
    command: "say [Pilaf] Starting inventory assertions test..."
    name: "Announce test start"

  - action: "servercommand"
    command: "gamemode creative pilaf_inventory_assert"
    name: "Set creative mode"

  - action: "servercommand"
    command: "clear pilaf_inventory_assert"
    name: "Clear inventory for clean test"

steps:
  # Test 1: Get empty inventory
  - action: "getinventory"
    player: "pilaf_inventory_assert"
    name: "Get initial empty inventory"
    storeAs: "inventory_empty"

  # Test 2: Give diamond sword
  - action: "giveitem"
    player: "pilaf_inventory_assert"
    item: "diamond_sword"
    count: 1
    name: "Give diamond sword"

  - action: "getinventory"
    player: "pilaf_inventory_assert"
    name: "Get inventory after sword"
    storeAs: "inventory_sword"

  # Test 3: Compare with empty inventory
  - action: "compare_states"
    state1: "inventory_empty"
    state2: "inventory_sword"
    name: "Compare empty vs with sword"
    storeAs: "compare_sword"

  - action: "print_state_comparison"
    variableName: "compare_sword"
    name: "Print sword comparison"

  # Test 4: Give cobblestone
  - action: "giveitem"
    player: "pilaf_inventory_assert"
    item: "cobblestone"
    count: 64
    name: "Give cobblestone stack"

  - action: "getinventory"
    player: "pilaf_inventory_assert"
    name: "Get inventory after cobblestone"
    storeAs: "inventory_full"

  # Test 5: Remove diamond sword
  - action: "removeitem"
    player: "pilaf_inventory_assert"
    item: "diamond_sword"
    count: 1
    name: "Remove diamond sword"

  - action: "getinventory"
    player: "pilaf_inventory_assert"
    name: "Get inventory after sword removal"
    storeAs: "inventory_no_sword"

  # Test 6: Compare to verify removal
  - action: "compare_states"
    state1: "inventory_full"
    state2: "inventory_no_sword"
    name: "Compare full vs no sword"
    storeAs: "compare_removal"

  - action: "print_state_comparison"
    variableName: "compare_removal"
    name: "Print removal comparison"

cleanup:
  - action: "servercommand"
    command: "clear pilaf_inventory_assert"
    name: "Clear inventory"

  - action: "servercommand"
    command: "say [Pilaf] Inventory assertions test completed"
    name: "Announce completion"

  - action: "disconnect"
    player: "pilaf_inventory_assert"
    name: "Disconnect test player"
