# Entity Operations Test
# Tests entity spawning and health management across backends
name: "Entity Operations Test"
description: "Tests entity spawning and health management across backends"

setup:
  - action: "execute_server_command"
    command: "say Starting entity operations test"
    name: "Server announcement"

  - action: "execute_server_command"
    command: "gamemode creative TestPlayer"
    name: "Set player to creative mode"

steps:
  # Spawn a test cow
  - action: "spawn_entity"
    name: "TestCow"
    type: "cow"
    location: [0, 64, 0]
    equipment: {}
    name: "Spawn test cow"

  # Check entity exists
  - action: "check_entity_exists"
    entity_name: "TestCow"
    assertions:
      - type: "entity_exists"
        expected: true
        name: "Verify cow exists"

  # Set entity health
  - action: "set_entity_health"
    entity_name: "TestCow"
    health: 10.0
    name: "Set cow health to 10"

  # Verify health change
  - action: "check_entity_health"
    entity_name: "TestCow"
    assertions:
      - type: "health_equals"
        expected: 10.0
        name: "Verify cow health is 10"

  # Spawn multiple entities
  - action: "spawn_entity"
    name: "TestZombie"
    type: "zombie"
    location: [5, 64, 5]
    equipment: {}
    name: "Spawn test zombie"

  - action: "spawn_entity"
    name: "TestCreeper"
    type: "creeper"
    location: [10, 64, 10]
    equipment: {}
    name: "Spawn test creeper"

  # Verify all entities exist
  - action: "check_entity_exists"
    entity_name: "TestZombie"
    assertions:
      - type: "entity_exists"
        expected: true
        name: "Verify zombie exists"

  - action: "check_entity_exists"
    entity_name: "TestCreeper"
    assertions:
      - type: "entity_exists"
        expected: true
        name: "Verify creeper exists"

cleanup:
  # Clean up entities
  - action: "execute_server_command"
    command: "kill TestCow TestZombie TestCreeper"
    name: "Remove test entities"

  - action: "execute_server_command"
    command: "say Entity operations test completed"
    name: "Test completion announcement"
